<!DOCTYPE html>
<html>
    <head>
        <title>Game loop prototype</title>
        <style>
            .container {
                width: 1000px;
                margin: 0 auto;
            }
            #spinny {
                height: 200px;
                width: 200px;
                position: relative;
                top: 100px;
                border: 1px solid black;
                background-color: brown;
            }
        </style>
        <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
        <script type="text/javascript" src="/js/gameloop.js"></script>
        <script>
            $(document).ready(function(){
                square = $('#spinny');
                square.css('transform', `rotate(${rotation}deg)`);

                $('#start').click(event => {
                    gameLoop.addListener(spinSquare);
                    gameLoop.start();
                });
                $('#pause').click(gameLoop.pause);
                $('#stop').click(event => {
                    rotation = 0;
                    gameLoop.stop();
                });
            })
            var square = null;
            var rotation = 0;

            function spinSquare(times){
                rotation += times.step * 45/1000;
                console.log('rotation to ', rotation);
                square.css('transform', `rotate(${rotation}deg)`);
            }

        </script>
    </head>
    <body>
        <div class="container">
            <button id="start">Start loop</button>
            <button id="pause">Pause loop</button>
            <button id="stop">Stop loop</button>
            <div id="spinny"></div>
        </div>
    </body>
</html>
